Bootstrap: docker
From: fedora:37
%post
 dnf group install --assumeyes "C Development Tools and Libraries"
 dnf install --assumeyes cmake
 dnf install --assumeyes rpm-build
 dnf install --assumeyes yaml-cpp-devel

%runscript
  # we're running in the build directory -- create a sub-build
  cd /mnt/build
  mkdir -p /mnt/install_root
  mkdir -p Fedora37-build
  cd Fedora37-build
  pwd
  cmake -DBUILD_RPM=1 -DCMAKE_INSTALL_PREFIX=/mnt/install_root ../../
  make
  ctest
  make package
  make install
  pwd
  ls ../../
  cd ../../examples/
  mkdir build_fed37
  cd build_fed37
  cmake -DCMAKE_PREFIX_PATH=/mnt/install_root/ ../
  make
  ./FormatExample
  
 
%help
  This builds SoDaUtils, runs the tests, and builds an rpm package

  After creating the sif file, do this:
  ./Fedora37.sif
  

  
